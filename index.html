<!DOCTYPE html>
<html>

<head>
  <title>viewer</title>
  <style type="text/css">
    .parent {
      width: 100%;
      height: 100%;
      position: fixed;
      top: 0;
      left: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: auto;
    }

    .block {
      canvas {
        display: block;
        border: none;
      }
    }

    body {
      background: black;
    }
  </style>
</head>

<body style="margin: 0;" id='bd' onkeydown="(klava(event.keyCode));">
  <div class="parent">
    <div id="lastResults" style="overflow:hidden;color:white;float:left;width:10%;">
      <div id="results"></div>
    </div>
    <div id="timer" style="position:absolute;color:white;top:0;padding:4%;"></div>
    <div class="block">
      <canvas id="display"></canvas>
    </div>
    <div id="records" style="color:white;float:right; width:10%;text-align:right;">
      <div>Your best Result:<br><span id="bestResult">0</span></div>
    </div>
  </div>
  <script type="text/javascript" src="MazeGenerator.js"></script>
  <script type="text/javascript" src="viewer.js"></script>
  <script type="text/javascript" src="timer.js"></script>
  <script type="text/javascript" src="controller.js"></script>
  <script type="text/javascript" src="AI.js"></script>
  <script type="text/javascript">
    function start() {
      lastResults.style.height = display.height + "px";
      records.style.height = display.height + "px";
      lastResults.innerHTML = "Last results:<br>" + lastResults.innerHTML;
      createMaze();
      findShortestPath();
      createBots(5);
      setInterval('Update()', 16);
      setInterval('SwitchTrapCondition()', 1000);
      setInterval('botsMove()', 500);
      findTIME();
    }

    function reset(win) {
      if (time < bestTime && win) {
        bestTime = time;
        bestResult.innerHTML = timer.innerHTML;
      }
      findTIME(win);
      findTIME(win);
      createMaze();
      findShortestPath();
      createBots(5);
      drawMaze();
      Hide();
    }
    start();

    function Update() {
      // Hide();
      // DrawRadius();
      // DrawExit();
      drawMaze();
      DrawPlayer();
      for (var i = 0; i < numBots; i++)
        if (Bots[i].y == Player.y && Bots[i].x == Player.x) {
          alert('LOSE');
          reset(0);
        }
      for (var i = 0; i < CELL_SIZE; i++) {
        if (Trap[i].action && Trap[i].x == Player.y && Trap[i].y == Player.x) {
          alert('LOSE');
          reset(0);
        }
      }
    }
  </script>
</body>

</html>
